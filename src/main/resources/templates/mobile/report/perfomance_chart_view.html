<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
	layout:decorator="layout/default" lang="ko">
<div  layout:fragment="content">
	<div class="container-fluid" style="padding-top: 20%;">
		<div class="row">
			<div class='col-xs-12'>
		        <form  >
		        	<div class="form-group">
						<select class="selectpicker" data-width="75%"  data-style="btn-info" id="select_plan">
						  <optgroup label="품종별">
						    <option value="1">물류계장입력분</option>
						    <option value="2">ERP 마감후 내역</option>
						  </optgroup>
						  <option data-divider="true"></option>
						  <option value="3">담당자별</option>
						</select>
		        	</div>
			        <div class="form-group">
						<label class="text-muted">기간</label>
			            <div class='input-group date'  >
				            <div class='input-group date' >
				                <input type='text' class="form-control"  id="start_month"/>
				            </div>
				            <span class="input-group-addon">-</span>
				             <div class='input-group date' >
				                <input type='text' class="form-control"  id="end_month"/>
				            </div>
				            <span class="input-group-btn">
				            	<button type="button" class="btn btn-info"  id="data_confirm_view">확인</button>
				            </span>
			            </div>
			        </div>
		        </form>
			</div>
		</div>
		<div class="row"  id="byKindViewDiv" >
			<div th:replace="/mobile/report/comp_by_kind_chart :: chartByKind" ></div>
		</div>
		<div class="row"  id="byPersonViewDiv" >
			<div th:replace="/mobile/report/comp_by_person_chart :: chartByPerson" ></div>
		</div>
		<div class="row">
			<div class="btn-group text-center"  role="group" style="padding: 16px 30% 16px;">
				<button type="button"  class="btn btn-default"  id="go_pre_view" >
					<i class="fa fa-chevron-left" aria-hidden="true"></i>
					&nbsp;이전
				</button>
				<button type="button"  class="btn btn-default"  id="go_menu" >
					<i class="fa fa-list" aria-hidden="true"></i>&nbsp;
					메뉴
				</button>
			</div>
		</div>
	</div>
<script th:inline="javascript">
/*<![CDATA[*/
$(document).ready(function() {
	perfomanceToChartInit();
});

function perfomanceToChartInit() {
	setTitle("계획대비실적_도표");
	perfomanceToChartControles();
	perfomanceToChartEventBind();
	byKindChartInit();
	byPersonChartInit();
// 	$(".tui-chart-chartExportMenu-area").hide();
}

function perfomanceToChartControles() {
	var thisMon = new Date();
	var thisMonStr = thisMon.getFullYear() + "-" + setTwinNum(thisMon.getMonth() + 1);
	$('#start_month').datetimepicker({
		useCurrent: false,  
		format: "YYYY-MM",
		viewMode: 'months'
	 });
	
    $('#end_month').datetimepicker({
    	format: "YYYY-MM",
		viewMode: 'months'
    });
    
    $('#start_month').val(thisMonStr);
    $('#end_month').val(thisMonStr);
    
    $("#start_month").on("dp.change", function (e) {
        $('#end_month').data("DateTimePicker").minDate(e.date);
    });
    $("#end_month").on("dp.change", function (e) {
        $('#start_month').data("DateTimePicker").maxDate(e.date);
    });

}

function selectChangeChanrtFunc() {
	$("#byKindViewDiv").hide();
	$("#byPersonViewDiv").hide();
    console.log($(this).val())
    switch($(this).val()) {
        case "1" : 
        case "2" : $("#byKindViewDiv").show(); 
          break;
        case "3" : $("#byPersonViewDiv").show(); 
            break;
        default : break;
    }
}

function perfomanceToChartEventBind() {
	$('#select_plan').on('rendered.bs.select', selectChangeChanrtFunc);
	
	$("#data_confirm_view").click(function() {
		$('#selectPlan').trigger("rendered.bs.select");
	});
	
	$("#go_pre_view").click(function() {
		history.back();
	});
	
	$("#go_menu").click(function() {
		location.href = "/menu";
	});
}
/*]]>*/
</script>
</div>
</html>